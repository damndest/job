{% extends 'templates.html' %}
{% block title %}알쓸여잡 - {{gamename}}{% endblock %}
{% load static %}

<!-- 자유게시판 리스트 HTML 탬플릿 -->

{% block content %}
<style>
    #wrapper {
        min-height: 100%;
    }
    #main-title {
        margin: 50px 10%;
        text-align: center;
    }
</style>

<div id="wrapper">
    <!-- 타이틀 부분 (무슨 종목 게시판인지는 game(영어), gamename(한국어)으로 알 수 있음) -->
    <div id="main-title">
        <h1>{{gamename}} 게시판</h1>
    </div>
    <!-- 게시글 목록 테이블 -->
    <div style="height: 500px;">
        <table class="table table-striped table-hover text-center" style="width:70%" align="center">
            <thead>
                <tr>
                    <th>글번호</th>
                    <th>제목</th>
                    <th>작성자</th>
                    <th>조회수</th>
                    <th>댓글수</th>
                </tr>
            </thead>
            <tbody>

            {% if post.paginator.count > 0 %}
                {% for value in post %}
                    <tr onclick="location.href='/sports/{{game}}/board/post/{{value.id}}'">
                        <td>{{value.id}}</td>
                        <td>{{value.title}}</td>
                        <td>{{value.author}}</td>
                        <td>{{value.views}}</td>
                        <td>{{value.comment}}</td>
                    </tr>
                {% endfor %}
            {% else %}
            <tr>
                <td colspan="5"><h3>작성된 글이 없습니다.</h3></td>
            </tr>
            {% endif %}
            </tbody>
        </table>
    </div>

    <!-- 게시글 페이징 영역 -->
    <ul class="pagination d-flex justify-content-center">
        {% if post.has_previous %}
            <li class="page-item"><a href="/sports/{{game}}/board/{{post.previous_page_number}}" class="page-link">Previous</a></li>
        {% else %}
            <li class="page-item disabled"><a href="" class="page-link">Previous</a></li>
        {% endif %}
        {% for i in page_num %}
            {% if post.number == i %}
                <li class="page-item active"><a href="/sports/{{game}}/board/{{i}}/" class="page-link">{{i}}</a></li>
            {% else %}
                <li class="page-item"><a href="/sports/{{game}}/board/{{i}}/" class="page-link">{{i}}</a></li>
            {% endif %}
        {% endfor %}
        {% if post.has_next %}
            <li class="page-item"><a href="/sports/{{game}}/board/{{post.next_page_number}}/" class="page-link">Next</a></li>
        {% else %}
            <li class="page-item disabled"><a href="" class="page-link">Next</a></li>
        {% endif %}
    </ul>

    <!-- 버튼 영역 -->
    <div class="d-flex justify-content-center">
        <!-- user.active 적용 필요 -->
        {% if user.is_active %}
            <button type="button" class="btn btn-success btn-lg mx-2" onclick="document.location.href='/sports/{{game}}/board/create'">글쓰기</button>
        {% endif %}
    </div>
</div>


{% endblock %}